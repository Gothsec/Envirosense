<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analytics</title>
  <link rel="stylesheet" href="../css/general_styles.css">
  <link rel="stylesheet" href="../css/analytics.css">
  <style>
    .contCharts {
      width: 400px;
      height: 400px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div id="containerTotalConsumption" class="contCharts"></div>
  <div id="containerDeviceDistribution" class="contCharts"></div>
  <div id="containerConsumptionTrend" class="contCharts"></div>

  <script src="https://cdn.jsdelivr.net/npm/echarts@5.2.1/dist/echarts.min.js"></script>
  <script>
    function renderCharts() {
      const chartTotalConsumption = echarts.init(document.getElementById('containerTotalConsumption'));
      const chartDeviceDistribution = echarts.init(document.getElementById('containerDeviceDistribution'));
      const chartConsumptionTrend = echarts.init(document.getElementById('containerConsumptionTrend'));

      const totalConsumptionOptions = {
        title: {
          text: 'Consumo Total de Energía'
        },
        tooltip: {
          trigger: 'item'
        },
        series: [
          {
            name: 'Consumo Total',
            type: 'gauge',
            detail: { formatter: '{value} kWh' },
            data: [{ value: 50, name: 'Consumo Total' }]
          }
        ]
      };

      const deviceDistributionOptions = {
        title: {
          text: 'Distribución del Consumo por Dispositivo'
        },
        tooltip: {
          trigger: 'item',
          formatter: '{a} <br/>{b}: {c} kWh ({d}%)'
        },
        legend: {
          orient: 'vertical',
          left: 'left'
        },
        series: [
          {
            name: 'Consumo por Dispositivo',
            type: 'pie',
            radius: '50%',
            data: [
              { value: 335, name: 'Luces' },
              { value: 310, name: 'Electrodomésticos' },
              { value: 234, name: 'Climatización' },
              { value: 135, name: 'Electrónicos' },
              { value: 1548, name: 'Otros' }
            ],
            emphasis: {
              itemStyle: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }
        ]
      };

      const consumptionTrendOptions = {
        title: {
          text: 'Tendencia de Consumo'
        },
        xAxis: {
          type: 'category',
          data: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun']
        },
        yAxis: {
          type: 'value'
        },
        series: [
          {
            name: 'Consumo',
            type: 'line',
            data: [150, 230, 224, 218, 135, 147]
          }
        ]
      };

      chartTotalConsumption.setOption(totalConsumptionOptions);
      chartDeviceDistribution.setOption(deviceDistributionOptions);
      chartConsumptionTrend.setOption(consumptionTrendOptions);
    }

    renderCharts();
  </script>
</body>
</html>
